<!DOCTYPE html>
<html data-use-rem="750">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>9.8元抽大奖</title>
    <link rel="stylesheet" href="./css/main.css">   
</head>
<body>
<script>
	!function(win){var doc=win.document,html=doc.documentElement,option=html.getAttribute("data-use-rem");if(null!==option){var baseWidth="NaN"==parseInt(option).toString()?750:parseInt(option),grids=baseWidth/100,clientWidth=html.clientWidth||320;html.style.fontSize=clientWidth/grids+"px";var testDom=document.createElement("div"),testDomWidth=0,adjustRatio=0;testDom.style.cssText="height:0;width:1rem;",doc.body.appendChild(testDom);var calcTestDom=function(){if(testDomWidth=testDom.offsetWidth,testDomWidth!==Math.round(clientWidth/grids)){adjustRatio=clientWidth/grids/testDomWidth;var reCalcRem=clientWidth*adjustRatio/grids;html.style.fontSize=reCalcRem+"px"}else doc.body.removeChild(testDom)};setTimeout(calcTestDom,20);var reCalc=function(){var newCW=html.clientWidth;newCW!==clientWidth&&(clientWidth=newCW,html.style.fontSize=newCW*(adjustRatio?adjustRatio:1)/grids+"px")};if(reCalc(),doc.addEventListener){var resizeEvt="orientationchange"in win?"orientationchange":"resize";win.addEventListener(resizeEvt,reCalc,!1),doc.addEventListener("DOMContentLoaded",reCalc,!1)}}}(window);
</script>
<div class="container">
	<div class="act-mod">
		<img src="./img/bg_01.jpg" />
	</div>
	<div class="act-mod">
		<img src="./img/bg_02.jpg" />
		<div class="block save-bell">
			<p>一片雪花=一次兑换机会，百分百得礼物喔</p>
			<div class="bell">
				<div class="thumb">
					<img src="./img/bell.png">
				</div>
				<p>"雪花"x1</p>
			</div>
			<div class="btn-group">
				<a href="javascript:void(0)">攒雪花</a>
			</div>
		</div>
	</div>
	<div class="act-mod">
		<img src="./img/bg_03.jpg" />
		<div class="block exchange">
			<div class="top">
				<p class="tip">一片"雪花"兑换一次，必得！一人最多5次，礼物价值10元-688元</p>
				<a href="#" class="btn-rules">活动规则</a>
			</div>
			<div class="winner">
				<ul>
					<li><p>100****164抽到魔鬼猫无线蓝牙耳机</p></li>
					<li><p>927****38抽到不二圣诞兔毛绒玩偶</p></li>
					<li><p>334****474抽到哑舍星座笔记本</p></li>
					<li><p>519****52抽到暴走漫画暖宝宝片</p></li>
					<li><p>793****38抽到懒蛋蛋萌杯</p></li>
					<li><p>259****871抽到变形金刚蓝牙音箱</p></li>
					<li><p>157****474抽到正义联盟笔记本</p></li>
					<li><p>867****25抽到不二圣诞兔毛绒玩偶</p></li>
					<li><p>415****563抽到舍星座笔记本</p></li>
					<li><p>615****75抽到魔鬼猫无线蓝牙耳机</p></li>
				</ul>
			</div>
			<div class="anm"></div>
			<div class="lottery">
				<div class="prize" index="1"><strong class="hide">lovelive！星空手办</strong></div>
				<div class="prize" index="2"><strong class="hide">魔鬼猫蓝牙耳机</strong></div>
				<div class="prize" index="3"><strong class="hide">变形金刚蓝牙音箱</strong></div>
				<div class="prize" index="8"><strong class="hide">不二圣诞兔</strong></div>
				<div class="lotteryBtn"><strong class="hide">点击抽奖</strong><p>当前有x片雪花</p></div>
				<div class="prize" index="4"><strong class="hide">正义联盟笔记本</strong></div>
				<div class="prize" index="7"><strong class="hide">哑舍星座笔记本</strong></div>
				<div class="prize" index="6"><strong class="hide">懒蛋蛋萌杯</strong></div>
				<div class="prize" index="5"><strong class="hide">暴走暖宝宝片</strong></div>
			</div>
			<div class="btn-group">
				<a href="javascript:void(0)" class="btn-collection"><strong class="hide">集齐三蛋兑换100萌点</strong></a>
			</div>
		</div>
	</div>
	<div class="act-mod">
		<img src="./img/bg_04.jpg" />
		<div class="block my-gifts">
			<p>兑换成功后，点击商品，前往填写地址，再支付<span>1分钱</span>即可送货到家</p>
			<dl style="width: 5rem;margin: 0.5rem auto;">
				<dd>
					<div class="thumb"><img src="./img/g1.png"></div>
					<p>XXXXX</p>
				</dd>
				<dd>
					<div class="thumb"><img src="./img/g1.png"></div>
					<p>XXXXX</p>
				</dd>
			</dl>
			
			<dl>
				<dd>
					<div class="thumb"><img src="./img/g1.png"></div>
					<p>XXXXX</p>
				</dd>
				<dd>
					<div class="thumb"><img src="./img/g1.png"></div>
					<p>XXXXX</p>
				</dd>
				<dd>
					<div class="thumb"><img src="./img/g1.png"></div>
					<p>XXXXX</p>
				</dd>
				
			</dl>
		</br>
	</div>
	
</div>

<div class="footer-nav">
	<a href="#">商城首页</a>
	<a href="#">我的优惠券</a>
	<a href="#">我的订单</a>
</div>

    <!-- 提示 -->
    <article class="mod-game-dialog mod-dialog-pop mod-dialog-pop-tip hide">
        <div class="mod-game-dialog-content">
            <div class="mod-cnt">
				<p>抽中XXXX（商品名称） 的高价值优惠券，已发到你的账户中，用券后购买只需支付1分钱喔！</p>
				<div class="btn-group">
					<a href="javascript:void(0)" class="btn-get">领取奖品</a>
				</div>
            </div>
			<a href="javascript:void(0)" class="close"><strong class="hide">关闭</strong></a>
        </div>
    </article>


<script type="text/javascript" src="./js/zepto.min.js"></script>
<script type="text/javascript">
var tigerGame = {
	params:null,
	init:function(){
		tigerGame.params ={
			num:{
				circle:2,//抽奖圈数
				lap:8,
				prize:2//抽中奖品
			},
			step:{
				total:0,
				fast:0,
				slow:8
			},
			speed:{
				fast:100,
				slow:200  
			},
			index:1
		}
	},
	monitor:function(){
		$(".lotteryBtn").bind("click",tigerGame.startAction);
	},
	getPrize:function(){
		prize = Math.floor(Math.random()*7 +1);
	},
	startAction:function(){
		tigerGame.init();
		$(".lotteryBtn").unbind("click");
		tigerGame.params.step.total = tigerGame.params.num.circle * tigerGame.params.num.lap + tigerGame.params.num.prize;
		tigerGame.goAction();
	},
	goAction:function(){
		if(tigerGame.params.step.total<=0){
			tigerGame.overAction();
			return false;  
		}
		$(".prize").removeClass("active");
		$(".prize").each(function(){
			if($(this).attr("index")==tigerGame.params.index){
				$(this).addClass("active");
			} 
		});
		if(tigerGame.params.step.total > tigerGame.params.step.slow){
			setTimeout(tigerGame.goAction,tigerGame.params.speed.fast);
		} else {
			setTimeout(tigerGame.goAction,tigerGame.params.speed.slow);
			tigerGame.params.speed.slow+=80;
		}
		tigerGame.params.step.total--;
		tigerGame.params.index++; 
		if(tigerGame.params.index==9){
			tigerGame.params.index = 1;
		}
	},
	overAction:function(){
		$(".lotteryBtn").bind("click",tigerGame.startAction);
		tigerGame.init();
	}
};
</script>
<script>
(function(){
	function msgmove(){ 
		var height = $(".winner ul li").first().height();
		$(".winner ul li").first().animate({"opacity":0,"height":0},500,function(){
			$(".winner ul li").last().after($(".winner ul li").first());
		});
		$(".winner ul li").last().animate({"height":height,"opacity":1},0);

		setTimeout(function(){
			msgmove();
		},3000);
	}
	msgmove();

	$(".lotteryBtn").bind("click",tigerGame.startAction);

	$(".btn-record").click(function(){
		$(".mod-dialog-pop-exchange").removeClass("hide").addClass("show");
	});

	$(".btn-rules").click(function(){
		$(".mod-dialog-pop-rules").removeClass("hide").addClass("show");
	});

	$(".close").click(function(){
		$(this).parents(".mod-game-dialog").removeClass("show").addClass("hide");
	});
})();
</script>

</body>
</html>